<!-- ================= RESULTADO ================= -->
<div id="appBox" class="hidden" style="padding:20px;">
  <div class="card">
    <h3>üìä Resultado do Projeto</h3>
    <div id="resultadoTela"></div>
    <br>
    <button onclick="voltarProjeto()">‚Üê Voltar</button>
  </div>
</div>

<script>
// ================= LOGIN =================
function login(){
  const u=document.getElementById('usuario').value.trim();
  const s=document.getElementById('senha').value.trim();

  if(u==="admin" && s==="1234"){
    document.getElementById('loginBox').style.display="none";
    document.querySelector('.form-wrapper').style.display="block";
  }else{
    alert("Usu√°rio ou senha incorretos");
  }
}

// inicia escondido
document.querySelector('.form-wrapper').style.display="none";

// ================= C√ÅLCULO =================
function calcularSistema(){

  // pegar dados principais
  const cultura=document.getElementById('culturaPrincipal').value;
  const areaIrrigada=parseFloat(document.getElementById('areaIrrigada').value)||0;
  const et0=parseFloat(document.getElementById('et0').value)||0;
  const kc=parseFloat(document.getElementById('kc').value)||1;
  const vazaoFonte=parseFloat(document.getElementById('vazaoFonte').value)||0;
  const desnivel=parseFloat(document.getElementById('desnivel').value)||0;

  if(!cultura || areaIrrigada<=0 || et0<=0){
    alert("Preencha os dados m√≠nimos.");
    return;
  }

  // ================= AGRONOMIA =================
  const etc = et0 * kc; // mm/dia
  const area_m2 = areaIrrigada * 10000;
  const volumeDia_m3 = (etc/1000) * area_m2;

  // ================= HIDR√ÅULICA =================
  const vazaoProjeto = volumeDia_m3 / 24; // m3/h estimado
  const HMT = 12 + desnivel;

  const potenciaCV = (vazaoProjeto * HMT) / 75;

  // m√©todo simples por cultura
  let metodo="Aspers√£o";
  if(["Tomate","Alface","Banana","Citros"].includes(cultura)){
    metodo="Gotejamento";
  }

  // ================= RELAT√ìRIO =================
  const relatorio=`
PROJETO DE IRRIGA√á√ÉO ‚Äî AGROCAL

Cultura: ${cultura}
√Årea irrigada: ${areaIrrigada.toFixed(2)} ha

--- Demanda H√≠drica ---
ETc: ${etc.toFixed(2)} mm/dia
Volume di√°rio: ${volumeDia_m3.toFixed(2)} m¬≥/dia

--- Hidr√°ulica ---
Vaz√£o de projeto: ${vazaoProjeto.toFixed(2)} m¬≥/h
HMT estimada: ${HMT.toFixed(2)} mca
Pot√™ncia estimada: ${potenciaCV.toFixed(2)} CV

--- Recomenda√ß√£o ---
M√©todo indicado: ${metodo}

Obs: Pr√©-dimensionamento t√©cnico.
`;

  document.getElementById('resultadoTela').textContent = relatorio;

  document.querySelector('.form-wrapper').style.display="none";
  document.getElementById('appBox').classList.remove('hidden');
}

// ================= VOLTAR =================
function voltarProjeto(){
  document.getElementById('appBox').classList.add('hidden');
  document.querySelector('.form-wrapper').style.display="block";
}
</script>